(this["webpackJsonpdual-n-back"]=this["webpackJsonpdual-n-back"]||[]).push([[0],{144:function(e,t,s){},152:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),c=s(52),i=s.n(c),r=(s(143),s(144),s(80)),o=s(116),l=s(27),u=s(28),h=s(68),d=s(66),j=s(161),b=s(168),p=s(169),v=s(162),m=s(76),f=s(166),x=s(165),y=s(163),k=s(171),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(l.a)(this,e),this._collection=t}return Object(u.a)(e,[{key:"collection",get:function(){return this._collection}},{key:"matches",value:function(e){for(var t=0,s=e;s<this._collection.length;s++){var a=this._collection[s];if(a.matchAsserted)this._collection[s-e].key===a.key&&(t+=1)}return t}},{key:"possibleMatches",value:function(e){for(var t=0,s=e;s<this._collection.length;s++){var a=this._collection[s],n=this._collection[s-e];a.key===n.key&&(t+=1)}return t}},{key:"missedMatches",value:function(e){for(var t=0,s=e;s<this._collection.length;s++){var a=this._collection[s];if(!a.matchAsserted){var n=this._collection[s-e];a.key===n.key&&(t+=1)}}return t}},{key:"falseMatches",value:function(e){for(var t=0,s=e;s<this._collection.length;s++){var a=this._collection[s];if(a.matchAsserted)this._collection[s-e].key!==a.key&&(t+=1)}return t}}]),e}(),O=function(){function e(t){Object(l.a)(this,e),this._matchAsserted=null,this._key=t}return Object(u.a)(e,[{key:"matchAsserted",get:function(){return this._matchAsserted},set:function(e){if("boolean"!==typeof e)throw new Error("Must be a boolean type");this._matchAsserted=e}},{key:"key",get:function(){return this._key}}]),e}(),S=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e))._visible=!1,a}return Object(u.a)(s,[{key:"index",get:function(){return this._key}},{key:"visible",get:function(){return this._visible},set:function(e){if("boolean"!==typeof e)throw new Error("Must pass a boolean");this._visible=e}}],[{key:"createRandomGameSpace",value:function(){return new s(Math.floor(9*Math.random()))}}]),s}(O),w=s.p+"static/media/A.f71bd597.wav",B=s.p+"static/media/B.e974a562.wav",M=s.p+"static/media/C.513e6b56.wav",A=s.p+"static/media/D.4919c469.wav",C=s.p+"static/media/E.035e9050.wav",N=s.p+"static/media/F.b24612a7.wav",G=s.p+"static/media/G.9522d041.wav",T=s.p+"static/media/H.d051f82b.wav",_=s.p+"static/media/I.96e7c52f.wav",W=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e,a){var n;return Object(l.a)(this,s),(n=t.call(this,a))._sound=new Audio(e),n}return Object(u.a)(s,[{key:"play",value:function(){this._sound.play()}}],[{key:"createRandomGameSound",value:function(){var e=[{sound:w,key:"A"},{sound:B,key:"B"},{sound:M,key:"C"},{sound:A,key:"D"},{sound:C,key:"E"},{sound:N,key:"F"},{sound:G,key:"G"},{sound:T,key:"H"},{sound:_,key:"I"}][Math.floor(9*Math.random())];return new s(e.sound,e.key)}}]),s}(O),H=[{key:0,text:"1 Back",value:1},{key:1,text:"2 Back",value:2},{key:2,text:"3 Back",value:3},{key:3,text:"4 Back",value:4},{key:4,text:"5 Back",value:5},{key:5,text:"6 Back",value:6},{key:6,text:"7 Back",value:7},{key:7,text:"8 Back",value:8},{key:8,text:"9 Back",value:9},{key:9,text:"10 Back",value:10},{key:10,text:"11 Back",value:11},{key:11,text:"12 Back",value:12}],V=s(21),E=s.n(V),P=s(128),D=s(164),L=s(2);function I(){var e=n.a.useState(!1),t=Object(P.a)(e,2),s=t[0],a=t[1];return Object(L.jsxs)(D.a,{closeIcon:!0,onClose:function(){return a(!1)},onOpen:function(){return a(!0)},open:s,centered:!1,size:"large",trigger:Object(L.jsxs)("span",{children:[Object(L.jsx)("p",{style:{textDecoration:"underline",cursor:"pointer",display:"inline-block"},children:"How to play"}),Object(L.jsx)(m.a,{name:"question circle"})]}),children:[Object(L.jsx)(D.a.Header,{children:Object(L.jsx)(b.a,{style:{display:"inline-block"},as:"h1",children:"How To Play"})}),Object(L.jsxs)(D.a.Content,{style:{padding:"25px"},children:[Object(L.jsx)(b.a,{as:"h2",children:"Controls"}),Object(L.jsxs)("ul",{children:[Object(L.jsx)("li",{children:"Press Spacebar to start the game"}),Object(L.jsx)("li",{children:"Press ESC to stop before trial is complete"})]}),Object(L.jsx)(b.a,{style:{marginTop:"20px"},as:"h2",children:"How To Play"}),Object(L.jsxs)("ul",{children:[Object(L.jsx)("li",{children:Object(L.jsx)("p",{style:{lineHeight:"1.5"},children:'The game requires the player to watch a series of flashing spaces on a grid, while simultaneously listening to a series of sounds. The player must match the last shown grid space and the last played sound with the grid space and sound N iterations back in the sequence. For instance, if the last sound played was "B" and the current N-back level is 2, then you must try to remember if the sound played two backward in the sequence was also "B" and if so, assert a match.'})}),Object(L.jsx)("li",{children:Object(L.jsx)("p",{style:{lineHeight:"1.5"},children:"Each game trial consists of twenty-five random sounds and random grid space flashes and lasts approximately 75 seconds. A full game session consists of twenty game trials and takes approximately 25 minutes to complete. At the end of each session, the player's average visual and audio scores as well as average n-back level are calculated. For best results, complete one full game session each day."})}),Object(L.jsx)("li",{children:Object(L.jsxs)("p",{style:{lineHeight:"1.5"},children:["For more information about working memory and a useful tutorial, view"," ",Object(L.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.youtube.com/watch?v=uOncXapT-j4&ab_channel=MarkAshtonSmith%2CPh.D.",children:"this YouTube video."})]})})]})]})]})}function R(e){var t=e.open,s=e.closeSessionStats,a=(0,e.calculateSessionStats)();return Object(L.jsxs)(D.a,{closeIcon:!0,onClose:function(){return s()},open:t,size:"small",centered:!1,children:[Object(L.jsxs)(D.a.Header,{children:[Object(L.jsx)(m.a,{name:"check circle",color:"green",size:"big"}),Object(L.jsx)(b.a,{style:{display:"inline-block"},as:"h2",children:"Session Complete!"})]}),Object(L.jsxs)(D.a.Content,{children:[Object(L.jsx)("p",{children:"Great work! You have completed 20 sessions. Give your brain and rest and come back tomorrow for your next memory workout."}),Object(L.jsx)(b.a,{as:"h3",children:"Session Breakdown:"}),Object(L.jsxs)("ul",{children:[Object(L.jsxs)("li",{children:[" ",Object(L.jsxs)("p",{children:[Object(L.jsx)("span",{style:{fontWeight:"Bold"},children:"Average N-Back level"}),":"," ",a.averageNBack]})]}),Object(L.jsxs)("li",{children:[" ",Object(L.jsxs)("p",{children:[Object(L.jsx)("span",{style:{fontWeight:"Bold"},children:"Average visual score"}),":"," ",a.visualAverage]})]}),Object(L.jsx)("li",{children:Object(L.jsxs)("p",{children:[Object(L.jsx)("span",{style:{fontWeight:"Bold"},children:"Average audio score"}),":"," ",a.audioAverage]})})]})]})]})}var F=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).saveOptions=function(){E.a.set("options",JSON.stringify(a.state.options),{expires:365})},a.saveLevel=function(){E.a.set("level",a.state.level)},a.saveTrials=function(){E.a.set("trials",a.state.trials)},a.saveNBack=function(){E.a.set("nBack",a.state.nBack)},a.saveHistory=function(){var e=E.a.get("sessionHistory")?[].concat(Object(o.a)(JSON.parse(E.a.get("sessionHistory"))),[{scores:a.calculateSessionStats(),date:new Date}]):[{scores:a.calculateSessionStats(),date:new Date}];E.a.set("sessionHistory",JSON.stringify(e),{expires:365})},a.incrementNBack=function(){a.setState((function(e){return{nBack:e.nBack+1}}))},a.decrementNBack=function(){a.state.nBack>1&&a.setState((function(e){return{nBack:e.nBack-1}}))},a.updateNBack=function(e,t){a.setState({nBack:t.value})},a.incrementProgressBar=function(){a.setState((function(e){return{trialProgress:e.trialProgress+4}}))},a.incrementLevel=function(){a.setState((function(e){return{level:e.level+1}}))},a.decrementTrials=function(){a.state.trials>0&&a.setState((function(e){return{trials:e.trials-1}}))},a.resetGame=function(){a.setState({level:0,trails:0,nBack:2},(function(){a.saveLevel(),a.saveTrials(),a.saveNBack()}))},a.start=function(e){a.state.active||" "!==e.key&&32!==e.key||a.setState({active:!0,iteration:-1,currentVisualScore:0,currentAudioScore:0,currentMissedVisualMatches:0,currentMissedAudioMatches:0,currentWrongAudioMatches:0,currentWrongVisualMatches:0,currentGameSpaces:[],currentGameSounds:[],trialProgress:0},(function(){a.incrementLevel(),a.decrementTrials(),a.runGameTrial()}))},a.stop=function(e){a.state.active&&("Escape"!==e.key&&27!==e.key||a.setState({active:!1}))},a.runGameTrial=function(){var e=setInterval((function(){a.setState((function(e){return{iteration:e.iteration+1}}),a.runTrialIteration),24!==a.state.iteration&&a.state.active||(clearInterval(e),a.completeGameTrial())}),3e3)},a.runTrialIteration=function(){var e,t=S.createRandomGameSpace(),s=W.createRandomGameSound(),n=t.key,c=a.state.currentGameSpaces,i=a.state.currentGameSounds;i.push(s),c.push(t),a.setState((e={},Object(r.a)(e,n,!0),Object(r.a)(e,"currentGameSpaces",c),Object(r.a)(e,"currentGameSounds",i),e),(function(){s.play()})),setTimeout((function(){a.setState(Object(r.a)({},n,!1),(function(){a.incrementProgressBar()}))}),1200)},a.addSessionScore=function(e,t,s){a.setState((function(a){return{sessionScores:[].concat(Object(o.a)(a.sessionScores),[{nBack:e,visualScore:t,audioScore:s}])}}))},a.calculateCurrentScores=function(){var e=a.state.nBack,t=new g(a.state.currentGameSpaces),s=new g(a.state.currentGameSounds),n=t.possibleMatches(e),c=s.possibleMatches(e),i=t.falseMatches(e),r=s.falseMatches(e),o=Math.floor(t.matches(e)/n*100)-5*i||0,l=Math.floor(s.matches(e)/c*100)-5*r||0,u=t.missedMatches(e),h=s.missedMatches(e);a.addSessionScore(e,o,l),a.setState({currentVisualScore:o>0?"".concat(o,"%"):0,currentAudioScore:l>0?"".concat(l,"%"):0,currentMissedVisualMatches:u,currentMissedAudioMatches:h,currentWrongVisualMatches:i,currentWrongAudioMatches:r}),a.state.options.autoUpdateNBack&&(o>=70&&l>=70&&a.incrementNBack(),o<40&&l<40&&a.state.nBack>2&&a.decrementNBack())},a.assertVisualMatch=function(){if(a.state.active){var e=a.state.currentGameSpaces;e[e.length-1].matchAsserted=!0,a.setState({currentGameSpaces:e})}},a.assertAudioMatch=function(){if(a.state.active){var e=a.state.currentGameSounds;e[e.length-1].matchAsserted=!0,a.setState({currentGameSounds:e})}},a.openSessionStats=function(){a.setState({showSessionStats:!0})},a.closeSessionStats=function(){a.setState({showSessionStats:!1})},a.calculateSessionStats=function(){var e=a.state.sessionScores.map((function(e){return e.audioScore})),t=a.state.sessionScores.map((function(e){return e.visualScore})),s=a.state.sessionScores.map((function(e){return e.nBack})),n=e.reduce((function(e,t){return e+t}),0)/e.length||0,c=t.reduce((function(e,t){return e+t}),0)/t.length||0;return{averageNBack:s.reduce((function(e,t){return e+t}),0)/s.length||2,visualAverage:c,audioAverage:n}},a.state={showControlsDimmer:!0,showSessionStats:!0,active:!1,nBack:Number(E.a.get("nBack"))||2,iteration:-1,level:Number(E.a.get("level"))||0,trials:Number(E.a.get("trials"))||20,currentVisualScore:0,currentAudioScore:0,currentMissedVisualMatches:0,currentMissedAudioMatches:0,currentWrongVisualMatches:0,currentWrongAudioMatches:0,currentGameSpaces:[],currentGameSounds:[],trialProgress:0,sessionScores:[],options:E.a.get("options")?JSON.parse(E.a.get("options")):{autoUpdateNBack:!0,saveHistory:!1},0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1},a}return Object(u.a)(s,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.start),document.addEventListener("keydown",this.stop)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.start),document.removeEventListener("keydown",this.stop)}},{key:"completeGameTrial",value:function(){var e=this;setTimeout((function(){e.setState({active:!1},(function(){console.log("Trial complete"),e.calculateCurrentScores(),e.saveLevel(),e.saveTrials(),e.saveNBack(),20===e.state.level&&(e.openSessionStats(),e.resetGame(),e.state.options.saveHistory&&e.saveHistory())}))}),3e3)}},{key:"render",value:function(){var e=this;return Object(L.jsxs)(j.a,{children:[Object(L.jsx)(R,{closeSessionStats:this.closeSessionStats,open:this.state.showSessionStats,calculateSessionStats:this.calculateSessionStats}),Object(L.jsx)(b.a,{style:{marginLeft:"18px",marginTop:"30px",display:"inline-block"},as:"h1",children:"Dual N-Back"}),Object(L.jsxs)(p.a,{relaxed:!0,centered:!0,style:{minWidth:"800px"},children:[Object(L.jsxs)(p.a.Column,{width:3,textAlign:"left",style:{marginTop:"27px",backgroundColor:"#E5E5E5",borderRadius:"3px",padding:"28px"},children:[Object(L.jsxs)("p",{children:["Visual Score:"," ",Object(L.jsx)("span",{style:{fontWeight:"bold"},children:this.state.currentVisualScore})]}),Object(L.jsxs)("p",{children:["Audio Score:"," ",Object(L.jsx)("span",{style:{fontWeight:"bold"},children:this.state.currentAudioScore})]}),Object(L.jsxs)("p",{children:["Wrong Visual:"," ",Object(L.jsx)("span",{style:{fontWeight:"bold"},children:this.state.currentWrongVisualMatches})]}),Object(L.jsxs)("p",{children:["Missed Visual:"," ",Object(L.jsx)("span",{style:{fontWeight:"bold"},children:this.state.currentMissedVisualMatches})]}),Object(L.jsxs)("p",{children:["Wrong Audio:"," ",Object(L.jsx)("span",{style:{fontWeight:"bold"},children:this.state.currentWrongAudioMatches})]}),Object(L.jsxs)("p",{children:["Missed Audio:"," ",Object(L.jsx)("span",{style:{fontWeight:"bold"},children:this.state.currentMissedAudioMatches})]}),Object(L.jsx)(v.a,{}),Object(L.jsx)(I,{}),Object(L.jsxs)("p",{children:[Object(L.jsx)("a",{style:{textDecoration:"underline"},target:"_blank",rel:"noreferrer",href:"https://en.wikipedia.org/wiki/N-back",children:"What Is Dual N-Back"}),Object(L.jsx)(m.a,{name:"question circle"})]})]}),Object(L.jsxs)(p.a.Column,{width:8,children:[Object(L.jsxs)(p.a,{columns:"3",celled:!0,style:{borderRadius:"3px"},children:[Object(L.jsxs)(p.a.Row,{style:{height:"160px"},children:[Object(L.jsx)(p.a.Column,{children:Object(L.jsx)("div",{style:{height:"100%"},className:this.state[0]?"visible-space":null},0)}),Object(L.jsx)(p.a.Column,{children:Object(L.jsx)("div",{style:{height:"100%"},className:this.state[1]?"visible-space":null},1)}),Object(L.jsx)(p.a.Column,{children:Object(L.jsx)("div",{style:{height:"100%"},className:this.state[2]?"visible-space":null},2)})]}),Object(L.jsxs)(p.a.Row,{style:{height:"160px"},children:[Object(L.jsx)(p.a.Column,{children:Object(L.jsx)("div",{style:{height:"100%"},className:this.state[3]?"visible-space":null},3)}),Object(L.jsx)(p.a.Column,{children:Object(L.jsx)("div",{style:{height:"100%"},className:this.state[4]?"visible-space":null},4)}),Object(L.jsx)(p.a.Column,{children:Object(L.jsx)("div",{style:{height:"100%"},className:this.state[5]?"visible-space":null},5)})]}),Object(L.jsxs)(p.a.Row,{style:{height:"160px"},children:[Object(L.jsx)(p.a.Column,{children:Object(L.jsx)("div",{style:{height:"100%"},className:this.state[6]?"visible-space":null},6)}),Object(L.jsx)(p.a.Column,{children:Object(L.jsx)("div",{style:{height:"100%"},className:this.state[7]?"visible-space":null},7)}),Object(L.jsx)(p.a.Column,{children:Object(L.jsx)("div",{style:{height:"100%"},className:this.state[8]?"visible-space":null},8)})]})]}),Object(L.jsxs)(p.a,{columns:3,centered:!0,children:[Object(L.jsx)(p.a.Column,{children:Object(L.jsx)(f.a,{textAlign:"center",onClick:function(t){e.assertAudioMatch(),t.target.blur()},fluid:!0,size:"big",children:"Audio Match"})}),Object(L.jsx)(p.a.Column,{children:Object(L.jsx)(f.a,{textAlign:"center",onClick:function(t){e.assertAudioMatch(),e.assertVisualMatch(),t.target.blur()},fluid:!0,size:"big",children:"Dual"})}),Object(L.jsx)(p.a.Column,{children:Object(L.jsx)(f.a,{textAlign:"center",onClick:function(t){e.assertVisualMatch(),t.target.blur()},fluid:!0,size:"big",children:"Visual Match"})})]}),Object(L.jsx)(x.a,{size:"large",color:"green",percent:this.state.trialProgress,style:{marginTop:"25px"},content:"".concat(this.state.trialProgress,"%")})]}),Object(L.jsxs)(p.a.Column,{width:4,mobile:4,style:{marginTop:"27px",backgroundColor:"#E5E5E5",borderRadius:"3px",padding:"28px"},children:[Object(L.jsxs)("p",{children:["Level:"," ",Object(L.jsx)("span",{style:{fontWeight:"bold"},children:this.state.level})]}),Object(L.jsxs)("p",{children:["Number of trails:"," ",Object(L.jsx)("span",{style:{fontWeight:"bold"},children:this.state.trials})]}),Object(L.jsx)(y.a,{simple:!0,placeholder:"N Back",options:H,value:this.state.nBack,onChange:this.updateNBack}),Object(L.jsx)(v.a,{}),Object(L.jsx)("p",{children:"Options"}),Object(L.jsx)(k.a,{label:"Auto-update n-back",toggle:!0,checked:this.state.options.autoUpdateNBack,onChange:function(t){var s=e.state.options;s.autoUpdateNBack=!s.autoUpdateNBack,e.setState({options:s},e.saveOptions)}},this.state.options),Object(L.jsx)(k.a,{label:"Save history",toggle:!0,style:{marginTop:"15px"},checked:this.state.options.saveHistory,onChange:function(t){var s=e.state.options;s.saveHistory=!s.saveHistory,e.setState({options:s},e.saveOptions)}})]})]})]})}}]),s}(a.Component),z=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,172)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;s(e),a(e),n(e),c(e),i(e)}))};i.a.render(Object(L.jsx)(n.a.StrictMode,{children:Object(L.jsx)(F,{})}),document.getElementById("root")),z()}},[[152,1,2]]]);
//# sourceMappingURL=main.36c43db4.chunk.js.map